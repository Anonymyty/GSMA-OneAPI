<!DOCTYPE html><html lang="en"><head><title>Location test</title><meta charset="utf-8"><style type="text/css">  html { height: 100% }  body { height: 100%; margin: 0; padding: 0 }  #map_canvas { height: 100% }</style><script type="text/javascript" src="jquery-1.6.2.js"></script><script type="text/javascript" src="jquery.oneapi.js"></script><script type="text/javascript" src="http://maps.googleapis.com/maps/api/js?key=AIzaSyAYNQMZEBPCkvT6aAeldXROH3HoxaSQh9w&libraries=geometry,places&sensor=false"></script><script type="text/javascript">// This block draws the Google Mapvar map;var service;var latlng;function initialize(lat,lng,name) {    // Create the initial map based on the initiator's location    latlng = new google.maps.LatLng(lat, lng);    var myOptions = {      zoom: 14,      center: latlng,      mapTypeId: google.maps.MapTypeId.ROADMAP    };    map = new google.maps.Map(document.getElementById("map_canvas"),myOptions);     createMarker(latlng,name, "img/me.png");    setPubMarkers();}function setPubMarkers(){ // shows all the pubs near our friends	var request = {	  location: latlng,	  radius: '500',	  types: ['bar']      };    service = new google.maps.places.PlacesService(map);    service.search(request, callback);}    function callback(results, status) {  if (status == google.maps.places.PlacesServiceStatus.OK) {	for (var i = 0; i < results.length; i++) {	  var pubLoc =  results[i].geometry.location;	  var pubName = results[i].name; 	  createMarker(pubLoc, pubName, "img/pint.png"); // show a pint glass at each pub	}  }}    function createMarker(location, name, image) {  marker = new google.maps.Marker({	position: location,	map: map,	title: name,	icon: image  });} </script></head><body> <div id="map_canvas"></canvas><script type="text/javascript">// This block locates a user and his friends, then initialises a Google map showing them all$(document).ready(function(){		var primeUser = new $.fn.oneapi.location("12345", "Me");		var elvis = new $.fn.oneapi.location("23456", "Elvis");	var jerrylee = new $.fn.oneapi.location("34567", "Jerry Lee");	var johnny = new $.fn.oneapi.location("45678", "Johnny");	// create the map with the end user in the centre	initialize(primeUser.latitude,primeUser.longitude, primeUser.name);		var elvisLatLng = new google.maps.LatLng(elvis.latitude,elvis.longitude);	var jerryleeLatLng = new google.maps.LatLng(jerrylee.latitude,jerrylee.longitude);	var johnnyLatLng = new google.maps.LatLng(johnny.latitude,johnny.longitude);		createMarker(elvisLatLng, elvis.name, "img/friend.png");	createMarker(jerryleeLatLng, jerrylee.name, "img/friend.png");	createMarker(johnnyLatLng, johnny.name, "img/friend.png");})</script></body></html>